<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0"
    />
    <title>Unity WebGL Firebase Test</title>

    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100vh;
        overflow: hidden;
        background: black;
      }

      canvas {
        width: 100% !important;
        height: 100% !important;
        background: #000;
        display: block;
      }
    </style>

    <!-- ‚úÖ Firebase SDK (—Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è, –ø–æ–¥—Ö–æ–¥—è—â–∞—è –¥–ª—è Unity WebGL) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyBbQn_8VcMjx5YUUSov8MRVLeDeo5wUNuA",
        authDomain: "promoithub.firebaseapp.com",
        databaseURL: "https://promoithub-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "promoithub",
        storageBucket: "promoithub.firebasestorage.app",
        messagingSenderId: "744750948753",
        appId: "1:744750948753:web:8576dbb3800f661044fa30",
        measurementId: "G-WN4N1B0WGL"
      };

      firebase.initializeApp(firebaseConfig);
      const analytics = firebase.analytics();

      // ‚úÖ –í–∫–ª—é—á–∞–µ–º —Å–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —è–≤–Ω–æ
      firebase.analytics().setAnalyticsCollectionEnabled(true);

      // ‚úÖ –§—É–Ω–∫—Ü–∏—è –¥–ª—è Unity
      function sendAnalyticsEvent(eventName, paramsJson) {
        try {
          const params = JSON.parse(paramsJson);
          analytics.logEvent(eventName, params);
          console.log("[Firebase] Event sent:", eventName, params);
        } catch (e) {
          console.error("[Firebase] Error parsing params", e);
        }
      }
    </script>
  </head>

  <body>
    <canvas id="unity-canvas" width="960" height="600"></canvas>

    <!-- –ó–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ –Ω–∞ —Å–≤–æ–∏ —Ñ–∞–π–ª—ã –±–∏–ª–¥–∞ -->
    <script src="Build/TestBuild.loader.js"></script>
    <script>
      var gameInstance = null;
      createUnityInstance(document.querySelector("#unity-canvas"), {
        dataUrl: "Build/TestBuild.data",
        frameworkUrl: "Build/TestBuild.framework.js",
        codeUrl: "Build/TestBuild.wasm",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "promoIthub",
        productVersion: "1.0",
      }).then((unityInstance) => {
        gameInstance = unityInstance;

        // üß™ –ê–≤—Ç–æ—Ç–µ—Å—Ç ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
          sendAnalyticsEvent("webgl_test_event", JSON.stringify({ source: "html_standalone" }));
        }, 3000);
      });
    </script>
  </body>
</html>
